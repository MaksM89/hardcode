# Django project

Это тестовый проект на django.

## Необходимые библиотеки

Для запуска необходим python 3.9 и фреймворк Django.

```pip install django```

Для запуска

```python manage.py runserver```

## База данных

Используеься sqlite3, файл БД *db.sqlite3*.
Для инициализации БД можно использовать *http://127.0.0.1:8000/init*
(добавляет двух пользователей, два продукта, три лекции по каждому,
небольшую статистику).

## Используемые сущности (study/models.py)

Lesson, Product, Student, StudentHistory. Между таблицами связь многие-ко-многим.

## api

- user/*int:user_id* - возвращает json со списком всех уроков по всем продуктам
к которым пользователь имеет доступ, с выведением информации о статусе и 
времени просмотра
- user/*int:user_id*/*int:product_id* - возвращает json по конкретному продукту
к которому пользователь имеет доступ, с выведением информации о статусе и
времени просмотра, а также датой последнего просмотра ролика
- stats - возвращает json со списоком всех продуктов на платформе,
к каждому продукту прилагается информация:
  - количество просмотренных уроков от всех учеников
  - сколько в сумме все ученики потратили времени на просмотр роликов
  - количество учеников занимающихся на продукте
  - процент приобретения продукта (рассчитывается исходя из количества
  полученных доступов к продукту деленное на общее количество пользователей на платформе)

## TODO:

1. Покрыть код тестами.
2. Сделать свагер.

